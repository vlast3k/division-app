# –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞ –¢–µ—Å—Ç–≤–∞–Ω–µ

## –ù–∞–ª–∏—á–Ω–∏ –¢–µ—Å—Ç–æ–≤–µ

### 1. Node.js –¢–µ—Å—Ç–æ–≤–µ (`run-tests.js`)
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ –∑–∞ –æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –ª–æ–≥–∏–∫–∞ –±–µ–∑ –Ω—É–∂–¥–∞ –æ—Ç –±—Ä–∞—É–∑—ä—Ä.

**–ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:**
```bash
node run-tests.js
```

**–¢–µ—Å—Ç–≤–∞–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏:**
- ‚úÖ `getTimeForDifficulty()` - –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –≤—Ä–µ–º–µ —Å–ø–æ—Ä–µ–¥ —Ç—Ä—É–¥–Ω–æ—Å—Ç –∏ –±—Ä–æ–π —Ü–∏—Ñ—Ä–∏
- ‚úÖ `generateProblem()` - –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞–¥–∞—á–∏ (—Å—ä–±–∏—Ä–∞–Ω–µ/–∏–∑–≤–∞–∂–¥–∞–Ω–µ, —Å/–±–µ–∑ –Ω–æ—Å–µ–Ω–µ/–∑–∞–µ–º–∞–Ω–µ)
- ‚úÖ –í–æ–¥–µ—â–∏ –Ω—É–ª–∏ –ø—Ä–∏ –µ–¥–Ω–æ–∑–Ω–∞—á–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- ‚úÖ Multi-digit –Ω–æ—Å–µ–Ω–µ/–∑–∞–µ–º–∞–Ω–µ –¥–µ—Ç–µ–∫—Ü–∏—è
- ‚úÖ **GroupManager** - –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –≤–∞–ª–∏–¥–Ω–∏ group IDs (8 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ **URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∏** - –ø–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ `?group=xxx`
- ‚úÖ **Share URL** - –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Å–ø–æ–¥–µ–ª—è–µ–º–∏ –ª–∏–Ω–∫–æ–≤–µ
- ‚úÖ **formatTimeAgo()** - –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ "–¥–Ω–µ—Å" / "–ø—Ä–µ–¥–∏ X –¥–Ω–∏"
- ‚úÖ **Timestamp** - –≤–∫–ª—é—á–≤–∞–Ω–µ –≤ leaderboard entries

**–û—á–∞–∫–≤–∞–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏:** 17/17 —É—Å–ø–µ—à–Ω–∏

---

### 2. –ë—Ä–∞—É–∑—ä—Ä–Ω–∏ –¢–µ—Å—Ç–æ–≤–µ (`test-math-game.html`)
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ —Å —Ä–µ–∞–ª–µ–Ω DOM –∏ UI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

**–ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:**
```bash
open test-math-game.html
```
–∏–ª–∏ –æ—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ –±—Ä–∞—É–∑—ä—Ä.

**–¢–µ—Å—Ç–≤–∞–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏:**
- ‚úÖ `buildProblemUI()` - –¥–∏–Ω–∞–º–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ UI –µ–ª–µ–º–µ–Ω—Ç–∏
- ‚úÖ `generateProblem()` - –≤—Å–∏—á–∫–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (addition/subtraction, carry/no-carry)
- ‚úÖ `selectCell()` - –∏–∑–±–æ—Ä –Ω–∞ –∫–ª–µ—Ç–∫–∞ –∑–∞ –≤—ä–≤–µ–∂–¥–∞–Ω–µ
- ‚úÖ `handleNumberClick()` - –ø–æ–ø—ä–ª–≤–∞–Ω–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ
- ‚úÖ `toggleCarry()` - –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –Ω–æ—Å–µ–Ω–µ/–∑–∞–µ–º–∞–Ω–µ
- ‚úÖ `checkAnswer()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏ (–ø—Ä–∞–≤–∏–ª–Ω–∏/–≥—Ä–µ—à–Ω–∏)
- ‚úÖ `carryStates` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –í–æ–¥–µ—â–∏ –Ω—É–ª–∏ –ø—Ä–∏ –µ–¥–Ω–æ–∑–Ω–∞—á–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- ‚úÖ Multi-digit –Ω–æ—Å–µ–Ω–µ –¥–µ—Ç–µ–∫—Ü–∏—è
- ‚úÖ **GroupManager** - –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ, URL —á–µ—Ç–µ–Ω–µ, share URL –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ
- ‚úÖ **formatTimeAgo()** - –≤—Ä–µ–º–µ–≤–∏ –º–∞—Ä–∫–µ—Ä–∏ –≤ leaderboard
- ‚úÖ **Timestamp** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ leaderboard entries

**–û—á–∞–∫–≤–∞–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏:** 21/21 —É—Å–ø–µ—à–Ω–∏

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏ –±—É—Ç–æ–Ω–∏:**
- "–°—Ç–∞—Ä—Ç–∏—Ä–∞–π —Ç–µ—Å—Ç–æ–≤–µ" - –∏–∑–ø—ä–ª–Ω—è–≤–∞ –≤—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ
- "–¢–µ—Å—Ç buildProblemUI()" - —Å–∞–º–æ UI creation
- "–¢–µ—Å—Ç generateProblem()" - —Å–∞–º–æ problem generation
- "–¢–µ—Å—Ç checkAnswer()" - —Å–∞–º–æ answer validation
- "–¢–µ—Å—Ç selectCell()" - —Å–∞–º–æ cell interaction
- "–¢–µ—Å—Ç GroupManager & Share" - —Å–∞–º–æ –≥—Ä—É–ø–∏ –∏ —Å–ø–æ–¥–µ–ª—è–Ω–µ
- "–¢–µ—Å—Ç Timestamp Display" - —Å–∞–º–æ –≤—Ä–µ–º–µ–≤–∏ –º–∞—Ä–∫–µ—Ä–∏

---

## –ù–æ–≤–∏ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏ (–¥–æ–±–∞–≤–µ–Ω–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è)

### Multi-tenant Groups —Å Firebase
- –í—Å—è–∫–∞ –≥—Ä—É–ø–∞ –∏–º–∞ —É–Ω–∏–∫–∞–ª–µ–Ω 8-—Å–∏–º–≤–æ–ª–µ–Ω ID
- –†–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç –≤: `groups/{groupId}/leaderboards/{configKey}/scores/`
- localStorage –µ backup, Firebase –µ –æ—Å–Ω–æ–≤–µ–Ω –∏–∑—Ç–æ—á–Ω–∏–∫

**–¢–µ—Å—Ç–æ–≤–µ:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –≤–∞–ª–∏–¥–Ω–∏ group IDs
- ‚úÖ –ß–µ—Ç–µ–Ω–µ –Ω–∞ group ID –æ—Ç URL –ø–∞—Ä–∞–º–µ—Ç—ä—Ä
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ share URL

### URL –°–ø–æ–¥–µ–ª—è–Ω–µ
- –§–æ—Ä–º–∞—Ç: `https://your-domain.com/index.html?group=abc12345`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –≥—Ä—É–ø–∞ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–µ –Ω–∞ URL
- Share –±—É—Ç–æ–Ω –≤ setup –µ–∫—Ä–∞–Ω–∏—Ç–µ –Ω–∞ –¥–≤–µ—Ç–µ –∏–≥—Ä–∏

**–¢–µ—Å—Ç–æ–≤–µ:**
- ‚úÖ –ü–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ `?group=` –ø–∞—Ä–∞–º–µ—Ç—ä—Ä
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª–µ–Ω share URL

### Clipboard –ö–æ–ø–∏—Ä–∞–Ω–µ
- –ò–∑–ø–æ–ª–∑–≤–∞ `navigator.clipboard.writeText()`
- Fallback –∫—ä–º `document.execCommand('copy')` –∑–∞ —Å—Ç–∞—Ä–∏ –±—Ä–∞—É–∑—ä—Ä–∏
- –í–∏–∑—É–∞–ª–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞: "üîó –°–ø–æ–¥–µ–ª–∏" ‚Üí "‚úÖ –ö–æ–ø–∏—Ä–∞–Ω–æ!" (2 —Å–µ–∫)

**–¢–µ—Å—Ç–æ–≤–µ:**
- ‚ö†Ô∏è Clipboard API —Å–µ —Ç–µ—Å—Ç–≤–∞ —Å–∞–º–æ —Ä—ä—á–Ω–æ (–∏–∑–∏—Å–∫–≤–∞ user gesture)

### Timestamp Display
- –í—Å–µ–∫–∏ leaderboard –∑–∞–ø–∏—Å –≤–∫–ª—é—á–≤–∞ `timestamp: Date.now()`
- –ü–æ–∫–∞–∑–≤–∞ —Å–µ –∫–∞—Ç–æ "–¥–Ω–µ—Å" –∏–ª–∏ "–ø—Ä–µ–¥–∏ X –¥–Ω–∏"
- –§—É–Ω–∫—Ü–∏—è `formatTimeAgo(timestamp)`

**–¢–µ—Å—Ç–æ–≤–µ:**
- ‚úÖ formatTimeAgo() –∑–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç –¥–Ω–µ—Å
- ‚úÖ formatTimeAgo() –∑–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç –ø—Ä–µ–¥–∏ –¥–Ω–∏
- ‚úÖ Timestamp –ø–æ–ª–µ—Ç–æ –≤ leaderboard —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞

---

## –ö–∞–∫ –¥–∞ –°—Ç–∞—Ä—Ç–∏—Ä–∞—à –†—ä—á–Ω–æ –¢–µ—Å—Ç–≤–∞–Ω–µ

### 1. –¢–µ—Å—Ç –Ω–∞ Share –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç
1. –û—Ç–≤–æ—Ä–∏ `index.html` –≤ –±—Ä–∞—É–∑—ä—Ä
2. –ò–∑–±–µ—Ä–∏ "–î–µ–ª–µ–Ω–∏–µ" –∏–ª–∏ "–°—ä–±–∏—Ä–∞–Ω–µ –∏ –∏–∑–≤–∞–∂–¥–∞–Ω–µ"
3. –ù–∞—Ç–∏—Å–Ω–∏ "üîó –°–ø–æ–¥–µ–ª–∏" –±—É—Ç–æ–Ω–∞
4. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ –±—É—Ç–æ–Ω—ä—Ç –ø–æ–∫–∞–∑–≤–∞ "‚úÖ –ö–æ–ø–∏—Ä–∞–Ω–æ!" –∑–∞ 2 —Å–µ–∫—É–Ω–¥–∏
5. –ü–æ—Å—Ç–∞–≤–∏ URL –æ—Ç clipboard –≤ –Ω–æ–≤ —Ç–∞–± –Ω–∞ –±—Ä–∞—É–∑—ä—Ä–∞
6. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ Group ID –ø–æ–ª–µ—Ç–æ –µ –ø–æ–ø—ä–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### 2. –¢–µ—Å—Ç –Ω–∞ Timestamp Display
1. –ó–∞–≤—ä—Ä—à–∏ –µ–¥–Ω–∞ –∏–≥—Ä–∞ –∏ –∑–∞–ø–∏—à–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç
2. –û—Ç–≤–æ—Ä–∏ leaderboard –µ–∫—Ä–∞–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞ "–¥–Ω–µ—Å" –¥–æ —Ç–≤–æ—è —Ä–µ–∑—É–ª—Ç–∞—Ç
4. (–û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ) –ü—Ä–æ–º–µ–Ω–∏ timestamp –≤ localStorage –Ω–∞ –ø–æ-—Å—Ç–∞—Ä–∞ –¥–∞—Ç–∞
5. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞ "–ø—Ä–µ–¥–∏ X –¥–Ω–∏"

### 3. –¢–µ—Å—Ç –Ω–∞ Multi-tenant Groups
1. –°—ä–∑–¥–∞–π —Ä–µ–∑—É–ª—Ç–∞—Ç —Å group ID "test1"
2. –°—ä–∑–¥–∞–π —Ä–µ–∑—É–ª—Ç–∞—Ç —Å group ID "test2"
3. –ü—Ä–µ–≤–∫–ª—é—á–∏ –º–µ–∂–¥—É –≥—Ä—É–ø–∏—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ leaderboard –ø–æ–∫–∞–∑–≤–∞ —Å–∞–º–æ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∑–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –≥—Ä—É–ø–∞

---

## –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Coverage –ê–Ω–∞–ª–∏–∑
- ‚úÖ Core game logic: 100%
- ‚úÖ Problem generation: 100%
- ‚úÖ Answer validation: 100%
- ‚úÖ UI interactions: 100%
- ‚úÖ GroupManager: 90% (clipboard API –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞)
- ‚úÖ Timestamp display: 100%

### –ò–∑–≤–µ—Å—Ç–Ω–∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- Clipboard API —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ –∏–∑–∏—Å–∫–≤–∞—Ç user gesture (—Ä—ä—á–Ω–æ —Ç–µ—Å—Ç–≤–∞–Ω–µ)
- Firebase –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ —Å–∞ mock–Ω–∞—Ç–∏ (–∏–∑–∏—Å–∫–≤–∞—Ç Firebase –µ–º—É–ª–∞—Ç–æ—Ä –∑–∞ –ø—ä–ª–Ω–æ –ø–æ–∫—Ä–∏—Ç–∏–µ)
- –í–∏–∑—É–∞–ª–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ (CSS, animations) –Ω–µ —Å–∞ –≤–∫–ª—é—á–µ–Ω–∏

### –°–ª–µ–¥–≤–∞—â–∏ –°—Ç—ä–ø–∫–∏
- [ ] –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ Firebase –µ–º—É–ª–∞—Ç–æ—Ä –∑–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ
- [ ] Visual regression —Ç–µ—Å—Ç–æ–≤–µ —Å—ä—Å screenshot comparison
- [ ] E2E —Ç–µ—Å—Ç–æ–≤–µ —Å Playwright/Cypress
- [ ] Performance —Ç–µ—Å—Ç–æ–≤–µ –∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –º–Ω–æ–≥–æ –∑–∞–¥–∞—á–∏

---

## –ö–æ–Ω—Ç–∞–∫—Ç–∏
–ó–∞ –≤—ä–ø—Ä–æ—Å–∏ –∏ –ø—Ä–æ–±–ª–µ–º–∏ —Å–≤—ä—Ä–∂–∏ —Å–µ —Å –ø–æ–¥–¥—Ä—ä–∂–∫–∞—Ç–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞.
